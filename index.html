<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Fractured Realm Rulebook</title>

<!-- PWA manifest -->
<link rel="manifest" href="/Fractured-Realm-Rulebook/manifest.json">

<!-- iOS install support -->
<link rel="apple-touch-icon" href="/Fractured-Realm-Rulebook/fracturedrealmlogo.png">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />

<style>
    body {
        margin: 0;
        background: #5e5754;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        height: 100vh;
    }

    #viewer {
        position: relative;
        width: 95vw;
        height: 95vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    img.page {
        max-width: 100%;
        max-height: 100%;
        border-radius: 6px;
        box-shadow: 0 0 20px rgba(0,0,0,0.4);
        transition: transform 0.5s ease;
    }

    /* 3D flip effect */
    .flip-next { transform: rotateY(-90deg); }
    .flip-prev { transform: rotateY(90deg); }

    /* Navigation arrows */
    .arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 45px;
        font-weight: bold;
        color: white;
        background: transparent;
        padding: 10px;
        cursor: pointer;
        user-select: none;
    }
    #prev { left: 10px; }
    #next { right: 10px; }
</style>
</head>

<body>

<div id="viewer">
    <span id="prev" class="arrow">&#10094;</span>
    <img id="pageImg" class="page" src="">
    <span id="next" class="arrow">&#10095;</span>
</div>

<script>
const base = "/Fractured-Realm-Rulebook/";

const pages = [
    base + "01.png",
    base + "02.png",
    base + "03.png",
    base + "04.png",
    base + "05.png",
    base + "06.png",
    base + "07.png",
    base + "08.png",
    base + "09.png",
    base + "10.png",
    base + "11.png",
    base + "12.png",
    base + "13.png",
    base + "14.png",
    base + "15.png",
    base + "16.png",
    base + "17.png",
    base + "fracturedrealmlogo.png"
];

let current = 0;
const img = document.getElementById("pageImg");

function showPage(i, direction) {
    if (direction) {
        img.classList.add(direction);
        setTimeout(() => {
            img.src = pages[i];
            img.classList.remove(direction);
        }, 250);
    } else {
        img.src = pages[i];
    }
}

document.getElementById("next").onclick = () => {
    if (current < pages.length - 1) {
        current++;
        showPage(current, "flip-next");
    }
};

document.getElementById("prev").onclick = () => {
    if (current > 0) {
        current--;
        showPage(current, "flip-prev");
    }
};

// Swipe controls
let startX = 0;
document.addEventListener("touchstart", e => startX = e.touches[0].clientX);
document.addEventListener("touchend", e => {
    let endX = e.changedTouches[0].clientX;
    if (endX - startX > 50) document.getElementById("prev").click();
    if (startX - endX > 50) document.getElementById("next").click();
});

// Load first page
showPage(0);

// Register service worker
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/Fractured-Realm-Rulebook/sw.js");
}
</script>

</body>
</html>


